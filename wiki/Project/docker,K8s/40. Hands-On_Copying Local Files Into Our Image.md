---
날짜: 2025-03-25
Objective: '"도커 컨테이너에 파일을 넣자"'
tags:
  - 🐲Project/개발활동/개인서버구축/Docker강의
---

OverVIew

- copy Instruction을 통해 로컬 파일을 이미지에 넣고, docker run 을 통해 해당 컨테이너를 실행했을때 정상 동작하는것을 알수 있다.
- ==> 컨테이너에 파일 넣자 X ==  이미지에 넣어진 컨테이너를 실행시킨다.

 

Details

# COPY명령어

```bash
FROM nginx:1.27.0

RUN apt-get update
RUN apt-get -y install vim

# /usr/share/nginx/html/index.html

# COPY source destination
COPY testIndex.html /usr/share/nginx/html/index.html
```

- COPY '[source]'  '[destination]' => source의 파일을 destination 파일로 붙여넣기
- 더 나아가기 ) 이 source 와 데스티네이션의 경로를 어떻게 작성하는지 확인하자
  우선 testIndex.html 은 Dockerfile 하고 같은 경로라서 별다른 문자열이 없고
  nginx 컨테이너는 / 로 시작 됐음을 알수 있다. 

```bash
jaebukbuk@jaebukbukubuntu24:~$ docker build -t web_server_image .
[+] Building 1.8s (10/10) FINISHED                        docker:default
 => [internal] load build definition from Dockerfile       0.0s
 => => transferring dockerfile: 221B                       0.0s 
 => [1/4] FROM docker.io/library/nginx:1.27.0@sha256:98f8ec75657d21b924fe4f69b6b9bff2f6550ea48838af479d8894a852000e40                    0.0s 
 => CACHED [2/4] RUN apt-get update             0.0s
 => CACHED [3/4] RUN apt-get -y install vim     0.0s
 => [4/4] COPY testIndex.html /usr/share/nginx/html/index.html     0.0s
 => exporting to image                                             0.0s
 => => exporting layers                                            0.0s
 => => writing image sha256:f634073ffc7af1cadf312777ad74ccf8b8062a25a8cd91076eb10947c367f699
 => => naming to docker.io/library/web_server_image                0.0s
```

- copy 가 정상적으로 동작 한것을 알수 있다.
- 하지만 오너쉽 문제로 해당 명령어가 실패할수이쓴데

```bash
# 이게 권한 문제 때문에 안될때
RUN chown nginx:nginx /usr/share/nginx/html/index.html
```

- 이때는 해당 권한 부여해 주자 user:group


# 권한 과 오너쉽
- Dockerfile 에 그냥 막 경로를 적고, 권한도 없으면 도커 파일로 build 시 다른 시스템에서 오류가 날수가 있다. 