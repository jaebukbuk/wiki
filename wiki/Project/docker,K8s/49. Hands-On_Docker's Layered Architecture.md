---
날짜: 2025-04-07
Objective: Doker 의 Layered Architecture에 대하여 알아보자
Script: "[[Sript_49]]"
tags:
  - 🐲Project/개발활동/개인서버구축/Docker강의
---
OverVIew 

 - Docker file 의 하나의 명령어마다 개별적인 이미지가 만들어지고 층층이 덮여져서 최종 이미지를 만든다.
 - 각각마다 독립적인 이미지란 말은, 케싱도 가능하고 재사용성도 좋다는 의미다.

Details 
# 이미지 히스토리 를 통한 Docker's Layered Architecture

```bash
jaebukbuk@jaebukbukubuntu24:~/containerize-express-app$ docker history express-app
IMAGE          CREATED         CREATED BY                                      SIZE     
75ad6404292d   6 days ago      CMD ["node" "index.js"]                         0B       
<missing>      6 days ago      EXPOSE map[3000/tcp:{}]                         0B       
<missing>      6 days ago      COPY src/index.js index.js # buildkit           784B     
<missing>      6 days ago      RUN /bin/sh -c npm ci # buildkit                5.03MB   
<missing>      6 days ago      COPY package*.json . # buildkit                 27.4kB   
<missing>      6 days ago      WORKDIR /app                                    0B       
<missing>      7 weeks ago     CMD ["node"]                                    0B       
...
<missing>      7 weeks ago     ENTRYPOINT ["docker-entrypoint.sh"]             0B       
<missing>      7 weeks ago     COPY docker-entrypoint.sh /usr/local/bin/ # …   388B     
<missing>      7 weeks ago     RUN /bin/sh -c set -ex   && export GNUPGHOME…   5.34MB   
<missing>      7 weeks ago     ENV YARN_VERSION=1.22.22                        0B       
<missing>      7 weeks ago     RUN /bin/sh -c ARCH= && dpkgArch="$(dpkg --p…   185MB    
<missing>      7 weeks ago     ENV NODE_VERSION=22.14.0                        0B       
<missing>      7 weeks ago     RUN /bin/sh -c groupadd --gid 1000 node   &&…   8.94kB   
<missing>      15 months ago   RUN /bin/sh -c set -ex;  apt-get update;  ap…   588MB   
<missing>      15 months ago   RUN /bin/sh -c set -eux;  apt-get update;  a…   177MB   
<missing>      23 months ago   RUN /bin/sh -c set -eux;  apt-get update;  a…   48.4MB  
<missing>      23 months ago   # debian.sh --arch 'amd64' out/ 'bookworm' '…   117MB   
jaebukbuk@jaebukbukubuntu24:~/containerize-express-app$ 
```

- Docker image 히스토리를 보면 우리가 입력한 각 명령어들 마다 개별적인 중간 이미지를 만들고, 최종적으로 합쳐서 최종 이미지를 만든다.
- 이를 Docker 의 Layered Architecture 라고한다.
- 우리의 기본이미지인  From Node:24 마저 
  기본이미지와 명령어들로 이루어진것을 알수 있다. 이를, **chaining of base images.** 일종의 "기본 이미지 연결(chain)"이라고 할 수 있다.
- 이러한 중간 이미지들은 케싱되어 이용되어 진다.

- 더 나아가서 : 이런 중간 이미지들을 이용하여 무언가를 할수 있지 않을까? ( 이미지 최적화라든지? )
