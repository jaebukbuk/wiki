---
날짜: 2025-04-10
Objective: Dockerfile 에 선언된 환경변수를 CLI 명령어인 Docker run 을 통해서 실제 컨테이너를 할당하고 실행할때 동적으로 만들어 사용할수 있다.
Script: 
tags:
  - 🐲Project/개발활동/개인서버구축/Docker강의
---
OverVIew 
- Dockerfile 에 선언된 환경변수를 CLI 명령어인 Docker run 을 통해서 실제 컨테이너를 할당하고 실행할때 동적으로 만들어 사용할수 있다.


Details 

# Dockerfile 에 선언한 환경변수 동적으로 사용할수 없을까?

```bash
jaebukbuk@jaebukbukubuntu24:~/enviroment-variables$ cat Dockerfile
FROM node:22-alpine

WORKDIR /app

COPY package*.json .

RUN npm ci

COPY . .

ENV PORT=5000

CMD ["node", "src/index.js"]
```

- ENV 환경의 PORT = 5000을 선언했다
- 하지만 docker build, run 시에는 해당 변수는 고정값으로 사용될수 밖에 없다.

```bash
jaebukbuk@jaebukbukubuntu24:~/enviroment-variables$ docker run -e PORT=5001 -d -p 5001:5001 --name express-5001 express
d1480293cc6d10e3d6cb20816e0696a6357faefb17305074ca8629e6a0aa85e9
```

- docker run 명령어를 통해 컨테이너를 만들고 실행할때 key value 값으로 선언되 환경변수를 -e 명령어를 통해서 오버라이드 할수있다. (같은 이미지에서도~)
- 이를 통해 docker run 시에 선언된 환경변수를 동적으로 사용할수 있다.
