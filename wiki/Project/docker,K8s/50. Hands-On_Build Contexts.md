---
날짜: 2025-04-08
Objective: Doker 의 Build 의 Contexts 에 대하여 알아보자
Script: "[[Sript_50]]"
tags:
  - 🐲Project/개발활동/개인서버구축/Docker강의
---
OverVIew 

- A build context means basically a build context refers to all the files and subdirectories and all the content that is required by our Docker file in order to build the image.
- 
- 컨텍스트란 - **It's basically all the files in the current directory that are then used in our image during the build command and considering our Docker file**

Details 

#  Docker CLI -> Docker Host - Docker Daemon

- Docker CLI -> 실제 Docker 일을 하는 Docker Daemon 과 통신을 담당하는 API 
- Docker Host -> Docker Daemon 이 있는 곳,  Docker Daemon 이라고 생각해도됨
- Docker Daemon -> 실제 Docker 일을 하는 녀석

==> Docker Host 와 Docker Cli, Context 는 다른 공간이므로 Docker host로 모든 지정된 컨텍스트를 업로드하는 과정이 필요하다.

# Docker build -t aa . 에서 살펴본 context
```bash
jaebukbuk@jaebukbukubuntu24:~/build-context$ docker build -t hello-from-node .
=> [internal] load build definition from Dockerfile  
=> => transferring dockerfile: 99B  
=> [internal] load metadata for docker.io/library/node:22                      => [auth] library/node:pull token for registry-1.docker.io                     => [internal] load .dockerignore                                               => => transferring context: 2B   
...
=> [internal] load build context                                               => => transferring context: 164B  
```

- 자세히 살펴보면 transferring context 란 명령이 보인다. 
- 해당 도커 파일의 context 속 파일이 없어서 2B밖에 안된다.

```bash
jaebukbuk@jaebukbukubuntu24:~/build-context$ ll
total 88
drwxrwxr-x  2 jaebukbuk jaebukbuk  4096 Apr  8 13:10 ./
drwxr-x--- 12 jaebukbuk jaebukbuk  4096 Apr  8 13:10 ../
-rw-rw-r--  1 jaebukbuk jaebukbuk    62 Apr  8 12:56 Dockerfile
-rw-rw-r--  1 jaebukbuk jaebukbuk    28 Apr  8 12:50 index.js
-rw-rw-r--  1 jaebukbuk jaebukbuk 72362 Apr  8 13:10 testFile
```

- 그나마 양을 좀 키워서 다시 build 해보면

```bash
jaebukbuk@jaebukbukubuntu24:~/build-context$ docker build -t hello-from-node .
[+] Building 1.7s (9/9) FINISHED                                               => [internal] load build definition from Dockerfile                            => => transferring dockerfile: 99B                                             => [internal] load metadata for docker.io/library/node:22                      => [auth] library/node:pull token for registry-1.docker.io                     => [internal] load .dockerignore                                               => => transferring context: 2B                                                 => [1/3] FROM docker.io/library/node:22@sha256:89b86535844dc9a7a2540b1cd3b3b1b84315fbc89369dc6d8f09591ca939562e                          
=> [internal] load build context                                               => => transferring context: 72.48kB                                            => CACHED [2/3] WORKDIR /app                                                   => [3/3] COPY . .                                                              => exporting to image                                                          => => exporting layers                                                         => => writing image sha256:9d5629aa43d7c01806ea7297185713de9419b18cc44b6b9bfd00a327bb732939        => => naming to docker.io/library/hello-from-node               
```

- 72.48kb 의 파일을 transferring 한것을 알수 있다.